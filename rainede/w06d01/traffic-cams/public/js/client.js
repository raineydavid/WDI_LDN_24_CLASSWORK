"use strict";var googleMap=googleMap||{},google=google;googleMap.addInfoWindowForCamera=function(o,e){var a=this;google.maps.event.addListener(e,"click",function(){"undefined"!=typeof a.infoWindow&&a.infoWindow.close(),a.infoWindow=new google.maps.InfoWindow({content:'<img src="http://www.tfl.gov.uk/tfl/livetravelnews/trafficcams/cctv/'+o.file+'"><p>'+o.location+"</p>"}),a.infoWindow.open(a.map,e),a.map.setCenter(e.getPosition()),a.map.setZoom(15)})},googleMap.createMarkerForCamera=function(o){var e=new google.maps.LatLng(o.lat,o.lng),a=new google.maps.Marker({position:e,map:this.map,icon:"./images/marker.png",animation:google.maps.Animation.DROP});this.addInfoWindowForCamera(o,a)},googleMap.loopThroughCameras=function(o){$.each(o.cameras,function(o,e){setTimeout(function(){googleMap.createMarkerForCamera(e)},50*o)})},googleMap.getCameras=function(){$.get("http://localhost:3000/cameras").done(this.loopThroughCameras)},googleMap.mapSetup=function(){var o=document.getElementById("map-canvas"),e={zoom:12,center:new google.maps.LatLng(51.506178,(-.088369)),mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(o,e),this.getCameras()},$(googleMap.mapSetup.bind(googleMap));